{"ast":null,"code":"'use strict';\n\n//const PLUGIN_NAME = 'mysql_native_password';\nconst auth41 = require('../auth_41.js');\nmodule.exports = pluginOptions => ({\n  connection,\n  command\n}) => {\n  const password = command.password || pluginOptions.password || connection.config.password;\n  const passwordSha1 = command.passwordSha1 || pluginOptions.passwordSha1 || connection.config.passwordSha1;\n  return data => {\n    const authPluginData1 = data.slice(0, 8);\n    const authPluginData2 = data.slice(8, 20);\n    let authToken;\n    if (passwordSha1) {\n      authToken = auth41.calculateTokenFromPasswordSha(passwordSha1, authPluginData1, authPluginData2);\n    } else {\n      authToken = auth41.calculateToken(password, authPluginData1, authPluginData2);\n    }\n    return authToken;\n  };\n};","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}